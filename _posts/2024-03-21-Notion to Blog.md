---
layout: post
title: Notion to Blog
categories: Etc
tags: [Project]
---

## 1. ë¸”ë¡œê·¸ë¥¼ ì‹œì‘í•˜ë‹¤


ë‚˜ëŠ” ë¶ˆì„±ì‹¤í•œ í¸ì´ë‹¤. ê¾¸ì¤€íˆ ë¬´ì–¸ê°€ë¥¼ í•œë‹¤ëŠ” ê²ƒì€ ë‚˜ ê°™ì´ ê²Œìœ¼ë¥¸ ë¶€ë¥˜ì˜ ì‚¬ëŒë“¤ì—ê² í¬ë‚˜í° ë„ì „ ì´ë‹¤. ê·¸ëŸ¼ì—ë„ ì´ ë„ì „ì„ ì‹œì‘í•˜ëŠ” ì´ìœ ëŠ” ê·¸ë™ì•ˆ ì¸í„°ë„·ì„ í†µí•´ ê³µë¶€ë¥¼ í•œ ê²ƒì— ëŒ€í•œ ë‚˜ë¦„ì˜ ê°ì‚¬ë¼ê³  í‘œí˜„ì„ í•˜ëŠ” í¸ì´ ë©‹ìˆê² ì§€ë§Œ, ê·¸ëƒ¥ ì–´ë”˜ê°€ì— ë‚˜ë¥¼ ì†Œê°œí•˜ê³  ì‹¶ì—ˆë‹¤. ì•ìœ¼ë¡œ ì´ ë¸”ë¡œê·¸ë¥¼ í†µí•´ ë‚˜ì˜ ê´€ì‹¬ì‚¬ë¥¼ ê³µìœ í•´ ë‚˜ê°ˆ ì˜ˆì •ì´ë‹¤. 


### 1.1. ë²ˆê±°ë¡œì›€


ë§‰ìƒ ê¹ƒí—ˆë¸Œ ë¸”ë¡œê·¸ë¥¼ êµ¬ì„±í•˜ê³  ê¸€ì„ ì‘ì„±í•˜ë ¤ê³  ë³´ë‹ˆ í¬ê²Œ ë‘ ê°€ì§€ ë¬¸ì œì ì´ ëˆˆì— ë„ì˜€ë‹¤.

1. **ê¸€ ì‘ì„± ê³¼ì •ì´ ë²ˆê±°ë¡­ë‹¤.**

	`í¬ë§·ì— ë§ê²Œ íŒŒì¼ëª… ì‘ì„±` - `YAML í—¤ë” ì‘ì„±` - `ê¸€ ì‘ì„±(ì½”ë“œì—ë””í„°ì—ì„œ)` - `ì´ë¯¸ì§€ë¥¼ ë¡œì»¬ì— ì €ì¥í•œ ë’¤ ì²¨ë¶€` - `ê¹ƒì— push` 


	ê¸€ì„ ì‘ì„±í•  ë•Œì—” ìœ„ì™€ ê°™ì€ ê³¼ì •ì„ ê±°ì³ì•¼ í•œë‹¤. ìƒˆë¡œìš´ ì¥ì¹˜ì—ì„œëŠ” ë‹¤ì‹œ ì›ê²© ì €ì¥ì†Œì— ì—°ê²° í•˜ëŠ” ë“±ì˜ ì„¸íŒ…ì„ ë‹¤ì‹œ í•´ì•¼ í•œë‹¤. ë˜í•œ ë‚´ê°€ ë©”ì¸ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ëª¨ë°”ì¼ ë””ë°”ì´ìŠ¤ì¸ ì•„ì´íŒ¨ë“œì—ì„œ ê¹ƒì„ ììœ ë¡­ê²Œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„  ìœ ë£Œ ì•±ì„ êµ¬ë§¤í•´ì•¼ í•œë‹¤. ë²ˆê±°ë¡­ê³  ì•ˆë©‹ì§€ë‹¤.

2. **ì´ë¯¸ì§€ ì²¨ë¶€ë„ ë²ˆê±°ë¡­ë‹¤.**

	ê¹ƒí—ˆë¸Œ ì €ì¥ì†Œì˜ ìš©ëŸ‰ ì œí•œì€ ëŒ€ëµ 1GB ~ 5GB ì •ë„ë¼ê³  í•œë‹¤. ë‚´ ì‚¬ìš© íŒ¨í„´ì„ ì˜ˆìƒí•´ ë³´ì•˜ì„ë•Œ ì¡°ê¸ˆë§Œ ì‹ ê²½ì„ ì“´ë‹¤ë©´(PNGê°€ ì•„ë‹Œ ì••ì¶•ëœ ì´ë¯¸ì§€ í¬ë§·ë§Œì„ ì‚¬ìš©í•œë‹¤ë©´), ì´ ìš©ëŸ‰ë„ ì¶©ë¶„íˆ ë„‰ë„‰í•œ í¸ì´ë‹¤. í•˜ì§€ë§Œ ë§¤ë²ˆ ì´ë¯¸ì§€ë¥¼ ì²¨ë¶€í•  ë•Œ ì‹ ê²½ì„ ì¨ì•¼ í•œë‹¤ëŠ” ê²ƒì´ í”¼ê³¤í•˜ê²Œ ëŠê»´ì¡Œë‹¤ 


	ëŒ€ì•ˆìœ¼ë¡œëŠ” ì´ìŠˆ ì‘ì„± ì°½ì— ì´ë¯¸ì§€ë¥¼ ì²¨ë¶€í•˜ë©´ ìƒì„±ë˜ëŠ” ì´ë¯¸ì§€ í˜¸ìŠ¤íŒ… ë§í¬ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•ë„ ìˆì—ˆë‹¤. ([ë§í¬](https://stackoverflow.com/questions/18360714/official-image-host-for-github-projects)) ì´ë ‡ê²Œ í•œë‹¤ë©´ ë¦¬í¬ì§€í† ë¦¬ ìš©ëŸ‰ ë¬¸ì œëŠ” í•´ê²°í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ë§¤ë²ˆ ì´ë¯¸ì§€ë¥¼ ì²¨ë¶€í•  ë•Œë§ˆë‹¤ ê¹ƒí—ˆë¸Œ ì´ìŠˆ ì‘ì„± ì°½ì— ë“¤ì–´ê°€ ë³µë¶™ í•´ì•¼í•œë‹¤ëŠ” ê²ƒ + ì € ì´ë¯¸ì§€ê°€ ì–¸ì œ ë§Œë£Œ ë ì§€ë„ ëª¨ë¥¸ ì±„ ì‚¬ìš©í•´ì•¼ í•œë‹¤ëŠ” ì‚¬ì‹¤ì´ ë§ˆìŒì— ë“¤ì§€ ì•Šì•˜ë‹¤.


ë¬¼ë¡  velogë‚˜ Tistoryì™€ ê°™ì€ ë¸”ë¡œê·¸ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ë©´ ë§ë”íˆ í•´ê²°ëœë‹¤. ê·¸ëŸ¬ë‚˜ ê¹ƒí—ˆë¸Œ ë¸”ë¡œê·¸ë¥¼ êµ¬ì¶•í•´ ê´€ë¦¬í•˜ëŠ” ìª½ì´ ë” ë©‹ì ¸ ë³´ì˜€ë‹¤. ê·¸ë˜ì„œ ìœ„ ë‘ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ”ì§€ ì°¾ì•„ë³¸ ë’¤, ë„ˆë¬´ ê·€ì°®ì•„ ì§„ë‹¤ë©´ ë„˜ì–´ê°€ë ¤ê³  í–ˆì—ˆë‹¤.


### 1.2. ê°œì„ í•  ìˆ˜ ìˆì„ê¹Œ?

1. **ê¸€ ì“°ê¸° ê°œì„ **

	ì¬ì‘ë…„ë¶€í„° ë…¸ì…˜ì´ë¼ëŠ” ë©”ëª¨ ì„œë¹„ìŠ¤ë¥¼ ìœ ìš©í•˜ê²Œ ì‚¬ìš©í•˜ê³  ìˆë‹¤. ì–¸ì œ ì–´ë””ì„œë‚˜ ë¡œê·¸ì¸ë§Œìœ¼ë¡œ ì‰½ê²Œ ë‚´ ë…¸íŠ¸ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì ê³¼ ê¸€ ì‘ì„± í™˜ê²½ì´ ì§ê´€ì ì´ë¼ëŠ” ì ì´ íŠ¹íˆë‚˜ ë§ˆìŒì— ë“¤ì—ˆë‹¤. 


	ê·¸ëŸ°ë° ë…¸ì…˜ì—ì„œëŠ” [API](https://developers.notion.com/docs/getting-started)ë¥¼ ì œê³µí•˜ê³  ìˆë‹¤. APIë¥¼ í†µí•´ ë‚´ê°€ ì‘ì„±í•œ í˜ì´ì§€ì˜ ë§ˆí¬ë‹¤ìš´ì„ ì–»ì–´ì˜¬ ìˆ˜ ìˆë‹¤. ì—¬ê¸°ì— [ê¹ƒí—ˆë¸Œ API](https://docs.github.com/en/rest)ë„ í•¨ê»˜ ì‚¬ìš©í•˜ë©´, ë…¸ì…˜ì— ê¸€ì„ ì‘ì„±í•œ ë’¤ ë¸”ë¡œê·¸ì— ê¸€ì„ ê²Œì‹œí•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•´ ë³´ì˜€ë‹¤. ì´ë ‡ê²Œ í•œë‹¤ë©´ ì²« ë²ˆì§¸ ì´ìŠˆë¥¼ í•´ê²°í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ì•˜ë‹¤.

2. **ì´ë¯¸ì§€ ê°œì„ **

	ì˜ì™¸ë¡œ ì´ë¯¸ì§€ ë¬¸ì œë„ ì‰¬ìš´ í•´ê²°ì±…ì´ ë³´ì˜€ë‹¤. ë…¸ì…˜ í˜ì´ì§€ì— ì´ë¯¸ì§€ë¥¼ ë¶™ì—¬ ë„£ìœ¼ë©´ ê·¸ ì´ë¯¸ì§€ëŠ” ë…¸ì…˜ ìì²´ í˜¸ìŠ¤íŒ… ì„œë²„ì— ì €ì¥ëœë‹¤. ì²˜ìŒì—ëŠ” ì´ë¯¸ì§€ ì›ë³¸ ë§í¬ë¥¼ ì™¸ë¶€ì— ê³µìœ í–ˆì„ ë•Œ ì ‘ê·¼ì´ ë˜ì§€ ì•Šì•„ ë¶ˆê°€ëŠ¥í•œ ì¤„ ì•Œì•˜ëŠ”ë°, í•´ë‹¹ í˜ì´ì§€ê°€ `Publish` ëœ ê²½ìš° ì™¸ë¶€ì—ì„œë„ ì ‘ê·¼ì´ ê°€ëŠ¥í–ˆë‹¤. ([Publish?](https://www.notion.so/ko-kr/help/public-pages-and-web-publishing)) ê·¸ëŸ¬ë‹ˆê¹ ë‘ ë²ˆì§¸ ì´ìŠˆë„ í•´ê²°í•  ê¸°ë¯¸ê°€ ë³´ì˜€ë‹¤.


ë…¸ì…˜ë§Œì„¸


## 2. ì¼ë‹¨ ê²°ê³¼ë¬¼ë¶€í„°..


ì§€ê¸ˆ ì´ ê¸€ì€ ë‹¤ìŒê³¼ ê°™ì€ ê³¼ì •ì„ ê±°ì³ ë‚´ ë¸”ë¡œê·¸ì— ê²Œì‹œê°€ ëœë‹¤. 


### **ì²« ë²ˆì§¸, ë¨¼ì € ë¸”ë¡œê·¸ ê¸€ì„ ê´€ë¦¬í•˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì— ìƒˆ ê¸€ì„ ì‘ì„±í•œë‹¤.**


![Untitled.png](https://spicykong.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fbc55d29d-9bcf-4907-ad9e-d252dc4154e4%2Fffe547f4-a97d-4db8-90b3-1c9e030349c0%2FUntitled.png?table=block&id=d562041d-6fac-4683-b748-e08813868bc1&userId=&cache=v2)


### **ë‘ ë²ˆì§¸, í•´ë‹¹ í˜ì´ì§€ì— ì ìš©ë  ë™ì‘ ì„ íƒ**

- `Nothing` ë‹¤ìŒ ì—…ë°ì´íŠ¸ ë•Œ, ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠìŒ.
- `Publish` ë‹¤ìŒ ì—…ë°ì´íŠ¸ ë•Œ, í•´ë‹¹ í˜ì´ì§€ë¥¼ ë¸”ë¡œê·¸ì— ê²Œì‹œí•¨
- `Unpublish` ë‹¤ìŒ ì—…ë°ì´íŠ¸ ë•Œ, í•´ë‹¹ í˜ì´ì§€ì™€ ë™ì¼í•œ ì œëª©&ë‚ ì§œë¥¼ ê°€ì§€ëŠ” ê²Œì‹œë¬¼ì„ ì‚­ì œ

ì•„ë˜ì²˜ëŸ¼ ê²Œì‹œë¬¼ ë§ˆë‹¤ ë™ì‘ì„ ì„¸íŒ…í•´ë‘ë©´ ëœë‹¤.


![Untitled.png](https://spicykong.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fbc55d29d-9bcf-4907-ad9e-d252dc4154e4%2F9dc0c517-ae3b-4f18-b0f9-69b88f2c2e53%2FUntitled.png?table=block&id=112911e4-50c8-4ce1-b7a4-8c5623ecd432&userId=&cache=v2)


### **ì„¸ ë²ˆì§¸, ì—…ë°ì´íŠ¸ ë°˜ì˜**


ë‚˜ëŠ” ê¹ƒí—ˆë¸Œ ì•¡ì…˜ì„ ì´ìš©í•´, ìˆ˜ë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ ì½”ë“œê°€ ë™ì‘ ë˜ë„ë¡ ì„¤ì •í–ˆë‹¤. (ì•„ë˜ í™”ë©´ì—ì„œ ì´ˆë¡ìƒ‰ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì—…ë°ì´íŠ¸ê°€ ì‹œì‘ëœë‹¤.) ê²Œì‹œë¬¼ì´ ì„±ê³µì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ ëœ ê²½ìš°, ê¸€ì˜ ìƒíƒœê°€ `Nothing`ìœ¼ë¡œ ë³€ê²½ë˜ë„ë¡ ë§Œë“¤ì—ˆë‹¤.


![Untitled.png](https://spicykong.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fbc55d29d-9bcf-4907-ad9e-d252dc4154e4%2F674b0eda-c5f8-432b-9cf6-36ffc9be63d3%2FUntitled.png?table=block&id=8352628d-4997-4ae2-8174-5bd54d1f3686&userId=&cache=v2)


(ì•„ë˜ ì‚¬ì§„ì„ ë³´ë©´ ëª¨ë‘ ìƒíƒœê°€ Nothingìœ¼ë¡œ ë³€ê²½ë˜ì—ˆë‹¤.)


![Untitled.png](https://spicykong.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fbc55d29d-9bcf-4907-ad9e-d252dc4154e4%2F6b6e15ac-c9b3-480d-b01b-f235535cfaf0%2FUntitled.png?table=block&id=062edc6a-3bf3-4cae-98d8-10c4e427253f&userId=&cache=v2)


### **ë„¤ ë²ˆì§¸, ê¸€ ê²Œì‹œ ì™„ë£Œ! ğŸ‰ğŸ‰**


ê²Œì‹œëœ ê¸€ì„ ê°ìƒí•˜ë©´ ëœë‹¤.


![Untitled.png](https://spicykong.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fbc55d29d-9bcf-4907-ad9e-d252dc4154e4%2F809c79d3-8e0e-4bca-8ecf-b79c67e36639%2FUntitled.png?table=block&id=ec3a6095-245d-4742-a756-ddc85c45e67c&userId=&cache=v2)


## 3. ê°œë°œ ê³¼ì •


ë¨¼ì €, [Notion2Blog](https://github.com/SpicyKong/Notion2Blog)ëŠ” ì•„ë˜ 3ê°€ì§€ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•´ ë§Œë“¤ì—ˆë‹¤. ê° ì„œë¹„ìŠ¤ ë³„ ì—­í• ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

- [**Notion API**](https://developers.notion.com/reference): ë…¸ì…˜ ê¸€ ê°€ì ¸ì˜¤ê¸°, ê¸€ ê²Œì‹œ í›„ í˜ì´ì§€ ìƒíƒœ ì—…ë°ì´íŠ¸
- [**Github API**](https://docs.github.com/en/rest?apiVersion=2022-11-28): ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— ê¸€ ì—…ë¡œë“œ(í˜¹ì€ ì—…ë°ì´íŠ¸) ë° ì‚­ì œ
- [**Github Action**](https://docs.github.com/ko/actions): ì½”ë“œë¥¼ ì›í•˜ëŠ” ì´ë²¤íŠ¸ì— ë§ì¶° ë™ì‘ ì‹œí‚¬ ìˆ˜ ìˆìŒ.

### 3.1 Notion API


ë…¸ì…˜ APIë¥¼ ì²˜ìŒ ë“¤ì—ˆì„ ë•ŒëŠ” ì´ì œ ëª¨ë“ ê²Œ í•´ê²°ë˜ì—ˆë‹¤ê³  ìƒê°í–ˆë‹¤. í•˜ì§€ë§Œ ê¸°ëŒ€ì™€ëŠ” ë…¸ì…˜ APIë¥¼ ê°€ì§€ê³  ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì„ ì–»ê¸°ê°€ ì¢€ ë²ˆê±°ë¡­ë‹¤. ê° ìš”ì†Œê°€ ë¸”ëŸ­ ì´ë¼ëŠ” ê°ì²´ë¡œ êµ¬ì„±ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ë§ˆí¬ë‹¤ìš´ì„ ì–»ì–´ì˜¤ë ¤ë©´ ì²˜ë¦¬í•´ì¤˜ì•¼ í•  ê²ƒì´ ë§ë‹¤. 


ë‹¤í–‰íˆë„ ì–´ë–¤ ì°©í•œë¶„ê»˜ì„œ ì´ë¯¸ ì´ ê·€ì°®ìŒì„ í•´ê²°í•´ ë†“ìœ¼ì…¨ë‹¤. [notion-to-md](https://github.com/souvikinator/notion-to-md) ë¼ëŠ” Node.js ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•˜ë©´ ì†ì‰½ê²Œ ì›í•˜ëŠ” í˜ì´ì§€ì˜ ë§ˆí¬ë‹¤ìš´ì„ ì–»ì–´ì˜¬ ìˆ˜ ìˆë‹¤. (ì°¾ì•„ë³´ë‹ˆ [Python ì˜¤í”ˆì†ŒìŠ¤ë„ ìˆë‹¤](https://github.com/echo724/notion2md)) 


**3.1.1. Notion API - ë§ˆí¬ë‹¤ìš´ í˜ì´ì§€ ì–»ê¸°**


ë¨¼ì €, í˜ì´ì§€ ì•„ì´ë””ë¡œ ë§ˆí¬ë‹¤ìš´ í…ìŠ¤íŠ¸ë¥¼ ì–»ì–´ì˜¤ëŠ” ë°©ë²•ì„ ì‚´í´ë³´ì. 


(Clientë¼ëŠ” ê°ì²´ëŠ” [@notionhq/client](https://www.npmjs.com/package/@notionhq/client)ì— ì •ì˜ë˜ì–´ ìˆëŠ”ë°, ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•˜ë©´ ë…¸ì…˜ APIë¥¼ ë”ìš± ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤, notion-to-md ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í•„ìš”í•˜ë‹¤.)


```javascript
let notion = new Client({auth:ë…¸ì…˜ API í† í°});
let n2m = new NotionToMarkdown({notionClient:notion});

console.log(n2m.pageToMarkdown(ì›í•˜ëŠ” í˜ì´ì§€ ì•„ì´ë””).parent);
// ë§ˆí¬ë‹¤ìš´ì´ ì¶œë ¥ëœë‹¤. (ê°„ë‹¨í•˜ë‹¤)
```


**3.1.2. Notion API - ì›ë³¸ ì´ë¯¸ì§€ ì–»ê¸°**


ë¬¸ì œëŠ” ìœ„ì™€ ê°™ì´ ì´ë¯¸ì§€ ë¸”ë¡ì— ìˆëŠ” URIë¥¼ ì´ìš©í•´ ë§ˆí¬ë‹¤ìš´ í…ìŠ¤íŠ¸ë¥¼ ê¸ì–´ì˜¨ ê²½ìš°, ì–¼ë§ˆ ì§€ë‚˜ì§€ ì•Šì•„ ì£¼ì†Œê°€ ë§Œë£Œë˜ì–´ ì´ë¯¸ì§€ë¥¼ ë³¼ ìˆ˜ ì—†ê²Œ ëœë‹¤. ë”°ë¼ì„œ ìš°ë¦¬ëŠ” ì›ë³¸ ì´ë¯¸ì§€ì— ì ‘ê·¼ì„ í•´ì•¼ í•œë‹¤.


ìš°ë¦¬ê°€ ì‚¬ìš©í•œ notion-to-mdë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ëŠ” í™•ì¥ì„±ì„ ê³ ë ¤í•´ `setCustomTransformer` ë¼ëŠ” ë©”ì†Œë“œë¥¼ ì œê³µí•œë‹¤. ì´ ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ë©´ ë§ˆí¬ë‹¤ìš´ í…ìŠ¤íŠ¸ê°€ êµ¬ì„±ë  ë•Œ, íŠ¹ì • ë¸”ë¡ì„ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. 


ê·¸ë˜ì„œ ë‚˜ëŠ” ì´ë¯¸ì§€ ë¸”ë¡ì„ ë§Œë‚˜ë©´, ì•„ë˜ì™€ ê°™ì´ ì›ë³¸ ì´ë¯¸ì§€ ì£¼ì†Œê°€ ì‚½ì…ë˜ë„ë¡ ìˆ˜ì •í–ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì´ë¯¸ì§€ ë§Œë£Œ ê±±ì •ì„ í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.


```javascript
n2m.setCustomTransformer("image", async (block) => {
    let uri:string = block.image.file.url.split("?", 1)[0]+"?table=block&id=" + block.id + "&userId=&cache=v2";
    uri = uri.replace(/\//g, "%2F");
    uri = uri.replace(":", "%3A");
    let notion_image_url:string = process.env.NOTION_DOMAIN + "/image/";

    return `![Untitled.png](${notion_image_url}${uri})`;
});
```


**3.1.3. Notion API - í˜ì´ì§€ ì •ë³´ ì–»ê¸°**


ë‹¤ìŒì€ ì—…ë°ì´íŠ¸ í•  ê¸€ì„ ëª¨ë‘ ê°€ì ¸ì˜¨ ë’¤, ê° ê¸€ì˜ í˜ì´ì§€ ì•„ì´ë””ë¥¼ ì–»ëŠ” ì˜ˆì œì´ë‹¤. `Action` ì´ë¼ëŠ” ì†ì„±ì´ `Publish` ë¼ë©´ í•´ë‹¹ ê¸€ì„ ê°€ì ¸ì˜¤ëŠ” ì½”ë“œì´ë‹¤. ê¸€ì´ ì—¬ëŸ¬ ê°œ ì¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë°°ì—´ë¡œ ë°˜í™˜ëœë‹¤.


```javascript
// ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì—…ë°ì´íŠ¸í•  ê¸€ë“¤ì„ ê°€ì ¸ì˜¨ ë’¤, ê° ê¸€ì˜ ì†ì„±ì— ì ‘ê·¼í•˜ëŠ” ì˜ˆì‹œ
const notion = new Client({auth: ë…¸ì…˜ API í† í°}); // ì²˜ìŒ ì˜ˆì‹œ ì½”ë“œì²˜ëŸ¼ Clientë¥¼ ìƒì„±í•˜ë©´ ëœë‹¤.
let res = notion.databases.query({
	database_id: ë…¸ì…˜ ë°ì´í„°ë² ì´ìŠ¤ ì•„ì´ë””,
	filter: {
		property: "Action", // í•„í„°ë§í•  ë°ì´í„°ë² ì´ìŠ¤ ì»¬ëŸ¼
		status: {
			equals: "Publish" // ì»¬ëŸ¼ ê°’ì´ Publishì´ë©´ ê°€ì ¸ì˜´
		}
	}
});

for (let page of res.results) {
    let pageId = page.id; // ì† ì‰½ê²Œ í˜ì´ì§€ ì•„ì´ë”” ì–»ìŒ.
} 
```


**3.1.4. Notion API - í˜ì´ì§€ ì†ì„± ì–»ê¸° & ì—…ë°ì´íŠ¸ í•˜ê¸°**


ì§€í‚¬ì—ì„œëŠ” ëª¨ë“  í¬ìŠ¤íŠ¸ì— ë‹¤ìŒê³¼ ê°™ì€ ì–‘ì‹ì˜ YAML í—¤ë” ì •ë³´ê°€ í•„ìš”í•˜ë‹¤. ì´ í—¤ë”ë¥¼ í†µí•´ ì œëª©, ë¶€ì œëª©, íƒœê·¸, ë‚ ì§œ ë“± ë‹¤ì–‘í•œ ì†ì„±ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤. 


```yaml
// YAML í—¤ë” ì˜ˆì‹œ
---
layout: post
title: ì•ˆë…•í•˜ì„¸ìš”
categories: Thinking
tags: [ë…¸ì…˜, ë¸”ë¡œê·¸]
---
```


í•˜ì§€ë§Œ ëª¨ë“  ë…¸ì…˜ í˜ì´ì§€ë§ˆë‹¤ ì €ëŸ° í…ìŠ¤íŠ¸ê°€ ìˆëŠ” ê²ƒì€ ì˜ˆì˜ì§€ ì•Šë‹¤. ê·¸ë˜ì„œ ë‚˜ëŠ” ì´ëŸ¬í•œ í—¤ë” ì •ë³´ëŠ” ì†ì„±ì— ì €ì¥í–ˆë‹¤. ì†ì„±ì„ ì´ìš©í•˜ë©´ ì•„ë˜ ì‚¬ì§„ì²˜ëŸ¼ ê¹”ë”í•˜ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.


![Untitled.png](https://spicykong.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fbc55d29d-9bcf-4907-ad9e-d252dc4154e4%2F4700785a-88d8-4c0f-9ce0-08178d467573%2FUntitled.png?table=block&id=ec67afee-81d1-4131-87f0-bc637150a1a2&userId=&cache=v2)


(ì†ì„±ì€ ë°ì´í„° ë² ì´ìŠ¤ ë·°ì—ì„œ ì•„ë˜ì™€ ê°™ì´ ë³´ì¸ë‹¤.)


![Untitled.png](https://spicykong.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fbc55d29d-9bcf-4907-ad9e-d252dc4154e4%2F06f2592f-5628-4015-b3cc-65212a1c13e2%2FUntitled.png?table=block&id=6080ad21-60f4-4422-a887-6e5e23dadec0&userId=&cache=v2)


í˜ì´ì§€ì˜ ì†ì„±ì„ ì–»ëŠ” ë°©ë²•ì€ í˜ì´ì§€ ì•„ì´ë””ë¥¼ ì–»ëŠ” ë°©ì‹ê³¼ ë™ì¼í•˜ë‹¤. `properties`ë¼ëŠ” ê°ì²´ì— í•´ë‹¹ í˜ì´ì§€ì˜ ì†ì„± ì •ë³´ê°€ ëª¨ë‘ ë‹´ê²¨ìˆë‹¤. ë‹¤ìŒ ì˜ˆì œ ì½”ë“œë¥¼ ì‚´í´ë³´ì.


```javascript
// ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì—…ë°ì´íŠ¸í•  ê¸€ë“¤ì„ ê°€ì ¸ì˜¨ ë’¤, ê° ê¸€ì˜ ì†ì„±ì— ì ‘ê·¼í•˜ëŠ” ì˜ˆì‹œ
const notion = new Client({auth: ë…¸ì…˜ API í† í°}); // ì²˜ìŒ ì˜ˆì‹œ ì½”ë“œì²˜ëŸ¼ Clientë¥¼ ìƒì„±í•˜ë©´ ëœë‹¤.
let res = notion.databases.query({
	database_id: ë…¸ì…˜ ë°ì´í„°ë² ì´ìŠ¤ ì•„ì´ë””,
	filter: {
		property: "Action", // í•„í„°ë§í•  ë°ì´í„°ë² ì´ìŠ¤ ì»¬ëŸ¼
		status: {
			equals: "Publish" // ì»¬ëŸ¼ ê°’ì´ Publishì´ë©´ ê°€ì ¸ì˜´
		}
	}
});

for (let page of res.results) {
    let title  = page.properties.Date.date.start + "-" + page.properties.Name.title[0].text.content+".md";
    let realTitle = page.properties.Name.title[0].text.content;
    let categories = page.properties.Categories.select.name;
    let tags = Array.from(page.properties.Tags.multi_select, (tag) => tag["name"]).toString();
    
    /// ----- ì—¬ê¸°ë¶€í„´ í˜ì´ì§€ ì†ì„± ì—…ë°ì´íŠ¸ ì½”ë“œ ----- ///
    page.properties.Action.status.name = "Nothing";
    page.properties.Action.status.color = "gray";
    page.properties.Published.checkbox = true;
    delete page.properties.Action.status.id; // updateí•  ë•Œì—ëŠ”, id ì •ë³´ë¥¼ ì‚­ì œí•˜ì§€ ì•Šìœ¼ë©´ ì˜¤ë¥˜ë¥¼ ë°˜í™˜í•œë‹¤.
    await notion.pages.update({page_id:page.id, properties: page.properties});

} 
```


ì¶”ê°€ë¡œ ìœ„ ì˜ˆì œ ì½”ë“œì—ì„œ ì£¼ì„ ì´í›„ì˜ ì½”ë“œëŠ” ì†ì„±ì„ ì—…ë°ì´íŠ¸í•˜ëŠ” ì½”ë“œì´ë‹¤. ë‚˜ì˜ ê²½ìš° í¬ìŠ¤íŠ¸ê°€ ê¹ƒí—ˆë¸Œì— ì„±ê³µì ìœ¼ë¡œ ê²Œì‹œëœ ê²½ìš° í•´ë‹¹ í˜ì´ì§€ì˜  `Action` ì†ì„±ì´ `Nothing`ìœ¼ë¡œ ë³€ê²½ë˜ê²Œ ë§Œë“¤ì—ˆë‹¤.


### 3.2. Github API


**3.2.1. Github API - ìƒˆ ê¸€ Add**


ë‹¤ìŒ ì˜ˆì œ ì½”ë“œëŠ” Github APIë¥¼ ì´ìš©í•´ ì›í•˜ëŠ” ì €ì¥ì†Œì— ê¸€ì„ ì—…ë¡œë“œ í•˜ëŠ” ì˜ˆì œì´ë‹¤. ì£¼ì˜ í•  ì ì€ contentë¥¼ base64ë¡œ ì¸ì½”ë”©í•´ ì „ë‹¬í•´ì•¼ í•˜ëŠ”ë°, ê·¸ëƒ¥ ì¸ì½”ë”©í•˜ë©´ ASCII ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ëŠ” ë¬¸ìëŠ” ê¹¨ì§ˆ ìˆ˜ ìˆë‹¤. ê·¸ë˜ì„œ ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í•œë‹¤ê³  í•œë‹¤.


```javascript
let headers = new Headers;
headers.set("Accept", "application/vnd.github+json");
headers.set("Authorization", "Bearer " + process.env.GIT_TOKEN);
let httpInfo = {
	method: "PUT",
	headers: headers,
	body: {
		message: "ì»¤ë°‹ ë©”ì‹œì§€",
		content: btoa(unescape(encodeURIComponent("ë§ˆí¬ë‹¤ìš´ íŒŒì¼ ë³¸ë¬¸ ì „ì²´ ìŠ¤íŠ¸ë§")))
	}
};

fetch(this.endpoint+ "ìœ ì €ì´ë¦„/ë¦¬í¬ì´ë¦„" + "/contents/" + "íŒŒì¼ì´ë¦„", httpInfo);
```


**3.2.2. Github API - ê¸°ì¡´ ê¸€ Update**


ê¸°ì¡´ ê¸€ì˜ ë‚´ìš©ì„ ë³€ê²½í•˜ëŠ” ê²½ìš°ì—ëŠ” ì¶”ê°€ë¡œ bodyì— SHA ì½”ë“œ ë¼ëŠ” ê²ƒì„ ì „ë‹¬í•˜ë©´ ëœë‹¤. ê·¸ ì™¸ì—ëŠ” ìœ„ì˜ ì½”ë“œì™€ ë™ì¼í•˜ë‹¤.


```javascript
let headers = new Headers;
headers.set("Accept", "application/vnd.github+json");
headers.set("Authorization", "Bearer " + process.env.GIT_TOKEN);
let httpInfo = {
	method: "PUT",
	headers: headers,
	body: {
		message: "ì»¤ë°‹ ë©”ì‹œì§€",
		content: btoa(unescape(encodeURIComponent("ë§ˆí¬ë‹¤ìš´ íŒŒì¼ ë³¸ë¬¸ ì „ì²´ ìŠ¤íŠ¸ë§"))),
		sha: "sha ì½”ë“œ"
	}
};

fetch(this.endpoint+ "ìœ ì €ì´ë¦„/ë¦¬í¬ì´ë¦„" + "/contents/" + "íŒŒì¼ì´ë¦„", httpInfo);
```


**3.2.2. Github API - ê¸°ì¡´ ê¸€ delete**


ê¸°ì¡´ ê¸€ì˜ ë‚´ìš©ì„ ì‚­ì œí•˜ëŠ” ë°©ì‹ë„ ìœ„ì™€ ë¹„ìŠ·í•˜ë‹¤. Methodë§Œ `Delete`ë¡œ ë°”ê¿”ì£¼ë©´ ëœë‹¤. 


```javascript
let headers = new Headers;
headers.set("Accept", "application/vnd.github+json");
headers.set("Authorization", "Bearer " + process.env.GIT_TOKEN);
let httpInfo = {
	method: "DELETE",
	headers: headers,
	body: {
		message: "ì»¤ë°‹ ë©”ì‹œì§€",
		sha: "sha ì½”ë“œ"
	}
};

fetch(this.endpoint+ "ìœ ì €ì´ë¦„/ë¦¬í¬ì´ë¦„" + "/contents/" + "íŒŒì¼ì´ë¦„", httpInfo);
```


**3.2.2. Github API - SHA ì½”ë“œ Get**


ì•„ë˜ ì˜ˆì œëŠ” `sha`ì½”ë“œë¥¼ ì–»ì–´ì˜¤ëŠ” ì˜ˆì œì´ë‹¤. (ì°¸ê³ ë¡œ, ê·¸ëƒ¥ ì‹¤í–‰ì‹œ ê²°ê³¼ê°€ ì´ìƒí•  ìˆ˜ ìˆìœ¼ë‹ˆ ë¹„ë™ê¸°ì— ëŒ€í•œ ì´í•´ë¥¼ í•œ í›„ ìˆ˜ì •í•´ì„œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.)


```javascript
let headers = new Headers;
headers.set("Accept", "application/vnd.github+json");
headers.set("Authorization", "Bearer " + process.env.GIT_TOKEN);
let httpInfo = {
	method: "GET",
	headers: headers
};

let res = fetch(this.endpoint+ "ìœ ì €ì´ë¦„/ë¦¬í¬ì´ë¦„" + "/contents/" + "íŒŒì¼ì´ë¦„", httpInfo);
// res.shaì— ì €ì¥ë˜ì–´ ìˆìŒ.
```


> ğŸ’¡ **ì¶”ê°€ë¡œ, Github API ì‚¬ìš©í•  ë•Œ, ìš”ì²­ ë¹ˆë„ê°€ ë„ˆë¬´ ì¦ìœ¼ë©´ conflictê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ì´ ì ì„ ì£¼ì˜í•˜ì.**


### 3.3. Github Action


Github Actionì„ ì´ìš©í•˜ë©´ ë‚´ê°€ ì›í•˜ëŠ” ì½”ë“œë¥¼, ì´ë²¤íŠ¸ ë°œìƒ ì‹œ, ì‹¤í–‰ ì‹œí‚¬ ìˆ˜ ìˆë‹¤. ë§¤ ì‹œê°„ë§ˆë‹¤ ì‹¤í–‰ì´ ë˜ë„ë¡ í•  ìˆ˜ë„ ìˆëŠ”ë°, ë‚˜ëŠ” ë‚´ê°€ ê¹ƒí—ˆë¸Œ ì•¡ì…˜ì„ ì§ì ‘ ì‹¤í–‰í•˜ëŠ” ê²½ìš°ì—ë§Œ ì‹¤í–‰ë˜ë„ë¡ ì„¸íŒ…í–ˆë‹¤.


**3.3.1. Github Action - ì‹œí¬ë¦¿ í‚¤ ì‚¬ìš©í•˜ê¸°**


API í‚¤ì™€ ê°™ì€ ë¯¼ê°í•œ ì •ë³´ë“¤ì„ ë¦¬í¬ì§€í† ë¦¬ì— ê³µê°œí•˜ë©´ ë‹¹ì—°íˆ ì•ˆëœë‹¤. ê¹ƒí—ˆë¸Œ ì•¡ì…˜ì—ì„œëŠ” ì´ëŸ¬í•œ ë¯¼ê°í•œ ì •ë³´ë¥¼ ì†ìˆ˜ë¹„ê²Œ ê´€ë¦¬í•´ì£¼ëŠ” `secrets`ì´ë¼ëŠ” ê²ƒì´ ìˆë‹¤. `ë¦¬í¬ì§€í† ë¦¬`- `Settings` - `Secrets and variables` - `Actions` ë¥¼ í†µí•´ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. 


ë‚˜ëŠ” ì—¬ê¸°ì— APIí‚¤ì™€ ê°™ì€ ì •ë³´ë“¤ì„ ì €ì¥ í•œ ë’¤ ì‚¬ìš©í–ˆë‹¤.


![Untitled.png](https://spicykong.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fbc55d29d-9bcf-4907-ad9e-d252dc4154e4%2Fd83808ad-a988-4823-971d-6601b5ba3be4%2FUntitled.png?table=block&id=5c59b9c5-1e9f-4991-a850-343e10910383&userId=&cache=v2)


**3.3.2. Github Action - Workflow ë§Œë“¤ê¸°**


ì›Œí¬í”Œë¡œìš°ì— ëŒ€í•œ ìì„¸í•œ êµ¬ë¬¸ì€ ë‹¤ë¥¸ ì˜ ì„¤ëª…ëœ ìë£Œê°€ ë§ìœ¼ë‹ˆ ê·¸ê±¸ ì´ìš©í•˜ì.. ì¼ë‹¨ ë‚˜ëŠ” ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í–ˆë‹¤. ì£¼ì„ì„ ë³´ë©´ ëŒ€ëµ íë¦„ì„ ì•Œ ìˆ˜ëŠ” ìˆë‹¤.


```yaml
name: Blog Manager

on:
  workflow_dispatch: # ìˆ˜ë™ìœ¼ë¡œ ë™ì‘ ì‹œí‚¤ê¸°

jobs:
  update:

    runs-on: ubuntu-latest # ìš°ë¶„íˆ¬ ìµœì‹  ë²„ì „ ì‚¬ìš©
    env:  # ì‹œí¬ë¦¿ í‚¤ë¥¼ í™˜ê²½ ë³€ìˆ˜ì— ë“±ë¡
      FILE_PATH: ${{ secrets.FILE_PATH }}
      GIT_REPO_URL: ${{ secrets.GIT_REPO_URL }}
      GIT_TOKEN: ${{ secrets.GIT_TOKEN }}
      NOTION_DB_ID: ${{ secrets.NOTION_DB_ID }}
      NOTION_TOKEN: ${{ secrets.NOTION_TOKEN }}
      NOTION_DOMAIN: ${{ secrets.NOTION_DOMAIN }}
      
    strategy:
      matrix:
        node-version: [21.x]
        # See supported Node.js release schedule at https://nodejs.org/en/about/releases/

    steps:
    - name: Download Notion2Blog # ì—…ë°ì´íŠ¸ ì‹œí‚¤ëŠ” ì½”ë“œ ë‹¤ìš´ë¡œë“œ
      uses: actions/checkout@v3 
      with:
        repository: SpicyKong/Notion2Blog
        
    - name: Use Node.js ${{ matrix.node-version }} # node.js í™˜ê²½ êµ¬ì„±
      uses: actions/setup-node@v3
      with:
        node-version: ${{ matrix.node-version }}
        cache: 'npm'
    - name: Install packages # íŒ¨í‚¤ì§€ ì„¤ì¹˜
      run: npm install -production
    - name: Update all changes # ì½”ë“œ ì‹¤í–‰(config íŒŒì¼ì—ì„œ ì„¤ì •í•œëŒ€ë¡œ)
      run: npm run update --if-present

```


## 4. ë


ë

